<% url = spree.product_path(product, taxon_id: taxon.try(:id)) %>

<div id="product_<%= product.id %>" class="col-md-3 col-sm-6 masonry-grid-item" data-hook="products_list_item" itemscope itemtype="https://schema.org/Product">

  <% cache(taxon.present? ? [I18n.locale, current_currency, taxon, product] : cache_key_for_product(product)) do %>

	<div class="listing-item white-bg bordered mb-20">
		<div class="overlay-container">
			<%= product_image(product, itemprop: "image") %>
			<a class="overlay-link popup-img-single" href="<%= product_image_link(product) %>"><i class="fa fa-search-plus"></i></a>	
<%-		#Find Out Spree Discount <span class="badge">30% OFF</span>  -%>
			<div class="overlay-to-top links">
				<span class="small">
					<a href="#" class="btn-sm-link"><i class="fa fa-heart-o pr-10"></i>Add to Wishlist</a>
					<a href="#" class="btn-sm-link"><i class="icon-link pr-5"></i><%= link_to 'View Details', url, itemprop: "url" %></a>
				</span>
			</div>
		</div>

		<div class="panel-body product-body">
			<%= link_to url, itemprop: "url" do %>
			<%= content_tag(:span,  truncate(product.name, length: 50), class: 'text-left info', itemprop: "name", title: product.name ) %>
			<% end %>

			<p class="small">Description: <%= product_short_description(product) %></p>
			<p class="small">Artist: <%= product_artists(product)%> </p>
			<p class="small">Dimensions: <%= product_size(product) %> </p>

			<div class="elements-list clearfix">
				<span itemprop="offers" itemscope itemtype="https://schema.org/Offer">

				<span class="price" itemprop="price" content="<%= product.price_in(current_currency).amount.to_d %>" > <%= display_price(product) %></span>

				<span itemprop="priceCurrency" content="<%= current_currency %>" ></span>
				<a href="#" class="pull-right margin-clear btn btn-sm btn-default-transparent btn-animated"><%= Spree.t(:add_to_cart) %><i class="fa fa-shopping-cart"></i></a>
			</div>
		
		</div>
		<% end %>
	</div>
</div>
